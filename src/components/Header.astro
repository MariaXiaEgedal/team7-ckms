---
import Text from "./Text.astro";
---

<header class="bg-header text-text-light w-full">
  <nav class="px-2xs md:px-l py-3xs flex items-center justify-between">
    <!-- Logo -->
    <a href="/">
      <img src="/favicon.svg" alt="CKMS Logo" class="h-20" />
    </a>

    <!-- Desktop Navigation (DIN KODE) -->
    <ul class="hidden lg:flex gap-s items-center">
      <li>
        <a
          href="/tildig"
          class="relative inline-block transition after:absolute after:left-0 after:-bottom-1 after:h-[2px] after:w-full after:bg-text-light after:scale-x-0 hover:after:scale-x-100 after:origin-left after:transition-transform after:duration-300"
        >
          <Text teksttype="brødtekstbold">Til dig</Text>
        </a>
      </li>

      <!-- Workshops med dropdown -->
      <li class="relative group">
        <a
          href="/workshops"
          class="relative inline-flex items-center transition after:absolute after:left-0 after:-bottom-1 after:h-[2px] after:w-full after:bg-text-light after:scale-x-0 hover:after:scale-x-100 after:origin-left after:transition-transform after:duration-300"
        >
          <Text teksttype="brødtekstbold">Workshops</Text>
        </a>

        <ul
          class="absolute left-0 top-full mt-3xs w-64 bg-header
              
                 opacity-0 invisible
                 group-hover:opacity-100 group-hover:visible
                 transition-all duration-200"
        >
          <li>
            <a
              href="/workshop-singleview"
              class="relative block px-2xs py-3xs hover:bg-white/10 after:absolute after:left-2xs after:-bottom-1 after:h-[2px] after:w-[calc(100%-1rem)] after:bg-text-light after:scale-x-0 hover:after:scale-x-100 after:origin-left after:transition-transform after:duration-300"
            >
              <Text teksttype="brødtekst">Skrivegruppe</Text>
            </a>
          </li>
          <li>
            <a
              href="/workshop-singleview"
              class="relative block px-2xs py-3xs hover:bg-white/10 after:absolute after:left-2xs after:-bottom-1 after:h-[2px] after:w-[calc(100%-1rem)] after:bg-text-light after:scale-x-0 hover:after:scale-x-100 after:origin-left after:transition-transform after:duration-300"
            >
              <Text teksttype="brødtekst">Åbent værksted</Text>
            </a>
          </li>
          <li>
            <a
              href="/workshop-singleview"
              class="relative block px-2xs py-3xs hover:bg-white/10 after:absolute after:left-2xs after:-bottom-1 after:h-[2px] after:w-[calc(100%-1rem)] after:bg-text-light after:scale-x-0 hover:after:scale-x-100 after:origin-left after:transition-transform after:duration-300"
            >
              <Text teksttype="brødtekst">Billedkunst gruppe</Text>
            </a>
          </li>
          <li>
            <a
              href="/workshop-singleview"
              class="relative block px-2xs py-3xs hover:bg-white/10 after:absolute after:left-2xs after:-bottom-1 after:h-[2px] after:w-[calc(100%-1rem)] after:bg-text-light after:scale-x-0 hover:after:scale-x-100 after:origin-left after:transition-transform after:duration-300"
            >
              <Text teksttype="brødtekst">Dramagruppe</Text>
            </a>
          </li>
          <li>
            <a
              href="/workshop-singleview"
              class="relative block px-2xs py-3xs hover:bg-white/10 after:absolute after:left-2xs after:-bottom-1 after:h-[2px] after:w-[calc(100%-1rem)] after:bg-text-light after:scale-x-0 hover:after:scale-x-100 after:origin-left after:transition-transform after:duration-300"
            >
              <Text teksttype="brødtekst">Film og lyd gruppe</Text>
            </a>
          </li>
        </ul>
      </li>

      <li>
        <a
          href="/detsker"
          class="relative inline-block transition after:absolute after:left-0 after:-bottom-1 after:h-[2px] after:w-full after:bg-text-light after:scale-x-0 hover:after:scale-x-100 after:origin-left after:transition-transform after:duration-300"
        >
          <Text teksttype="brødtekstbold">Det sker</Text>
        </a>
      </li>

      <li>
        <a
          href="/forskning"
          class="relative inline-block transition after:absolute after:left-0 after:-bottom-1 after:h-[2px] after:w-full after:bg-text-light after:scale-x-0 hover:after:scale-x-100 after:origin-left after:transition-transform after:duration-300"
        >
          <Text teksttype="brødtekstbold">Forskning</Text>
        </a>
      </li>

      <li>
        <a
          href="/hjælptil"
          class="relative inline-block transition after:absolute after:left-0 after:-bottom-1 after:h-[2px] after:w-full after:bg-text-light after:scale-x-0 hover:after:scale-x-100 after:origin-left after:transition-transform after:duration-300"
        >
          <Text teksttype="brødtekstbold">Støt</Text>
        </a>
      </li>

      <li>
        <a
          href="/omos"
          class="relative inline-block transition after:absolute after:left-0 after:-bottom-1 after:h-[2px] after:w-full after:bg-text-light after:scale-x-0 hover:after:scale-x-100 after:origin-left after:transition-transform after:duration-300"
        >
          <Text teksttype="brødtekstbold">Om os</Text>
        </a>
      </li>
    </ul>

    <!-- Burger (mobil) -->
    <button
      type="button"
      class="lg:hidden inline-flex items-center justify-center p-2xs"
      aria-label="Åbn menu"
      aria-controls="mobileMenu"
      id="openMenuBtn"
    >
      <!-- burger ikon -->
      <svg
        class="h-8 w-8"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
      >
        <path d="M4 6h16M4 12h16M4 18h16"></path>
      </svg>
    </button>
  </nav>

  <!-- Mobil overlay menu -->
  <dialog
    id="mobileMenu"
    class="modal m-0 p-0 max-w-none w-full max-h-full bg-transparent"
  >
    <!-- Panel -->
    <div class="h-full w-full bg-header text-text-light px-2xs py-3xs">
      <!-- topbar -->
      <div class="flex items-start justify-between">
        <a href="/" aria-label="Gå til forsiden">
          <img src="/favicon.svg" alt="CKMS Logo" class="h-20" />
        </a>

        <button
          type="button"
          class="p-2xs"
          aria-label="Luk menu"
          id="closeMenuBtn"
        >
          <!-- X ikon -->
          <svg
            class="h-10 w-10"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path d="M6 6l12 12M18 6L6 18"></path>
          </svg>
        </button>
      </div>

      <!-- links centreret -->
      <div class="h-[calc(100%-80px)] flex items-center justify-center">
        <ul class="flex flex-col items-center gap-m text-center">
          <li>
            <a
              href="/tildig"
              class="relative inline-block after:absolute after:left-0 after:-bottom-1 after:h-[2px] after:w-full after:bg-text-light after:scale-x-0 hover:after:scale-x-100 after:origin-left after:transition-transform after:duration-300"
            >
              <span class="text-2xl font-semibold">Til dig</span>
            </a>
          </li>

          <!-- Workshops (klik -> underpunkter) -->
          <li class="w-full">
            <details class="group">
              <summary
                class="list-none cursor-pointer flex items-center justify-center gap-3xs relative after:absolute after:left-0 after:-bottom-1 after:h-[2px] after:w-full after:bg-text-light after:scale-x-0 group-hover:after:scale-x-100 after:origin-left after:transition-transform after:duration-300"
              >
                <span class="text-2xl font-semibold">Workshops</span>

                <!-- Din egen pil -->
                <img
                  src="/img/pilnedhvid.svg"
                  alt=""
                  class="h-5 w-5 transition-transform duration-200 group-open:rotate-180"
                />
              </summary>

              <ul class="mt-xs space-y-3xs text-center">
                <li>
                  <a
                    href="/workshop-singleview"
                    class="relative inline-block after:absolute after:left-0 after:-bottom-1 after:h-[2px] after:w-full after:bg-text-light after:scale-x-0 hover:after:scale-x-100 after:origin-left after:transition-transform after:duration-300"
                  >
                    <Text teksttype="brødtekst">Skrivegruppe</Text>
                  </a>
                </li>

                <li>
                  <a
                    href="/workshop-singleview"
                    class="relative inline-block after:absolute after:left-0 after:-bottom-1 after:h-[2px] after:w-full after:bg-text-light after:scale-x-0 hover:after:scale-x-100 after:origin-left after:transition-transform after:duration-300"
                  >
                    <Text teksttype="brødtekst">Åbent værksted</Text>
                  </a>
                </li>

                <li>
                  <a
                    href="/workshop-singleview"
                    class="relative inline-block after:absolute after:left-0 after:-bottom-1 after:h-[2px] after:w-full after:bg-text-light after:scale-x-0 hover:after:scale-x-100 after:origin-left after:transition-transform after:duration-300"
                  >
                    <Text teksttype="brødtekst">Billedkunst gruppe</Text>
                  </a>
                </li>

                <li>
                  <a
                    href="/workshop-singleview"
                    class="relative inline-block after:absolute after:left-0 after:-bottom-1 after:h-[2px] after:w-full after:bg-text-light after:scale-x-0 hover:after:scale-x-100 after:origin-left after:transition-transform after:duration-300"
                  >
                    <Text teksttype="brødtekst">Dramagruppe</Text>
                  </a>
                </li>

                <li>
                  <a
                    href="/workshop-singleview"
                    class="relative inline-block after:absolute after:left-0 after:-bottom-1 after:h-[2px] after:w-full after:bg-text-light after:scale-x-0 hover:after:scale-x-100 after:origin-left after:transition-transform after:duration-300"
                  >
                    <Text teksttype="brødtekst">Film og lyd gruppe</Text>
                  </a>
                </li>
              </ul>
            </details>
          </li>

          <li>
            <a
              href="/detsker"
              class="relative inline-block after:absolute after:left-0 after:-bottom-1 after:h-[2px] after:w-full after:bg-text-light after:scale-x-0 hover:after:scale-x-100 after:origin-left after:transition-transform after:duration-300"
            >
              <span class="text-2xl font-semibold">Det sker</span>
            </a>
          </li>

          <li>
            <a
              href="/forskning"
              class="relative inline-block after:absolute after:left-0 after:-bottom-1 after:h-[2px] after:w-full after:bg-text-light after:scale-x-0 hover:after:scale-x-100 after:origin-left after:transition-transform after:duration-300"
            >
              <span class="text-2xl font-semibold">Forskning</span>
            </a>
          </li>

          <li>
            <a
              href="/hjælptil"
              class="relative inline-block after:absolute after:left-0 after:-bottom-1 after:h-[2px] after:w-full after:bg-text-light after:scale-x-0 hover:after:scale-x-100 after:origin-left after:transition-transform after:duration-300"
            >
              <span class="text-2xl font-semibold">Støt</span>
            </a>
          </li>

          <li>
            <a
              href="/omos"
              class="relative inline-block after:absolute after:left-0 after:-bottom-1 after:h-[2px] after:w-full after:bg-text-light after:scale-x-0 hover:after:scale-x-100 after:origin-left after:transition-transform after:duration-300"
            >
              <span class="text-2xl font-semibold">Om os</span>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </dialog>

  <script>
    const dialog = document.getElementById("mobileMenu") as HTMLDialogElement;
    const openBtn = document.getElementById("openMenuBtn");
    const closeBtn = document.getElementById("closeMenuBtn");

    openBtn?.addEventListener("click", () => {
      dialog.showModal();
    });

    closeBtn?.addEventListener("click", () => {
      dialog.close();
    });

    dialog.addEventListener("click", (e) => {
      if (e.target === dialog) {
        dialog.close();
      }
    });
  </script>

  <style>
    /* gør dialog fullscreen og uden standard styling */
    #mobileMenu::backdrop {
      background: rgba(0, 0, 0, 0.35);
    }
    #mobileMenu {
      border: none;
    }
  </style>
</header>
